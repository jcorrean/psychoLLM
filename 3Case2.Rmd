# <span style="color: #7c0cc7;">Second Case: Anthropic's Claude-generated items</span>

Like the first case, we are going to test the dimensionality of a sample of psychometric items generated by Anthropic's Claude. We begin by opening the items as follows.

The data can be downloaded from [here](https://github.com/jcorrean/psychoLLM/blob/main/Data/ClaudeTest.csv). If you download this file, proceed as follows (Don't forget to change the path where you download the data file).


```{r, warning=FALSE, message=FALSE}
library(readr)

ClaudeTest <- read_csv("Data/ClaudeTest.csv")
ClaudeTest$doc_id <- 1:nrow(ClaudeTest)
```

Then, we parsed these items as a computational linguistic corpus as follows:
```{r, warning=FALSE, message=FALSE}
library(quanteda)
ClaudeItems <- corpus(ClaudeTest$item)
docvars(ClaudeItems, "Dimension") <- ClaudeTest$dimension
docvars(ClaudeItems, "Generating.Source") <- ClaudeTest$item.source
summary(ClaudeItems)
ItemsData <- data.frame(summary(ClaudeItems, n = length(ClaudeItems)))
```

Now, let's check the difference between the items generated by the LLM and those generated by humans in terms of the length of their statements as captured by the total number of words or "Tokens".

```{r, warning=FALSE, message=FALSE}
boxplot(data = ItemsData, Tokens ~ Generating.Source, notch = T)
```

Now, let's test other things

```{r, warning=FALSE, message=FALSE}
Items <- tokens(ClaudeItems, 
                   remove_numbers = TRUE, 
                   remove_punct = TRUE, 
                   remove_url = TRUE, 
                   remove_symbols = TRUE) %>%  
  tokens_remove(stopwords("english"))


CLAUDEITEMS <- dfm(Items, tolower = TRUE)
existing.items <- corpus_subset(ClaudeItems, Generating.Source == "existing.scale")
ExistingItems <- dfm(tokens(existing.items), tolower = TRUE)
LLMgeneratedItems <- corpus_subset(ClaudeItems, Generating.Source == "LLM.generated")
LLMGeneratedItems <- dfm(tokens(LLMgeneratedItems), tolower = TRUE)
```




Let's see if the eight first items are clusterable or not.

```{r, warning=FALSE, message=FALSE}
library(hopkins)
Hopkins.Items <- hopkins(as.matrix(ExistingItems))
Hopkins.Items
hopkins.pval(Hopkins.Items, n = 8)
```

The Hopkins statistics suggests that these eight items are indeed measuring at least two dimensions. If this is correct we should be able to corroborate this as follows:

```{r, warning=FALSE, message=FALSE}
library("quanteda.textmodels")
tmod <- textmodel_ca(ExistingItems)
tmod$rowcoord

LLM.items <- corpus_subset(ClaudeItems, Generating.Source == "LLM.generated")
LLMITEMS <- dfm(tokens(LLM.items), tolower = TRUE)
tmod2 <- textmodel_ca(LLMITEMS)
tmod2
tmod$rowinertia
```

